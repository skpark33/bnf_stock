# KOSPI 200 ë°ì´í„° ìˆ˜ì§‘ í”„ë¡œê·¸ë¨ ì‚¬ìš© ê°€ì´ë“œ

`get_data.py`ëŠ” í•œêµ­íˆ¬ìì¦ê¶Œ APIë¥¼ í†µí•´ KOSPI 200 ì¢…ëª©ì˜ ì¼ë³„ ì‹œì„¸ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ì—¬ JSON íŒŒì¼ë¡œ ì €ì¥í•˜ëŠ” í”„ë¡œê·¸ë¨ì…ë‹ˆë‹¤.

---

## ğŸ“‹ ëª©ì°¨

- [ì„¤ì¹˜ ìš”êµ¬ì‚¬í•­](#ì„¤ì¹˜-ìš”êµ¬ì‚¬í•­)
- [ê¸°ë³¸ ì‚¬ìš©ë²•](#ê¸°ë³¸-ì‚¬ìš©ë²•)
- [ëª…ë ¹ì¤„ ì˜µì…˜](#ëª…ë ¹ì¤„-ì˜µì…˜)
- [ì‚¬ìš© ì˜ˆì‹œ](#ì‚¬ìš©-ì˜ˆì‹œ)
- [ì¶œë ¥ íŒŒì¼ êµ¬ì¡°](#ì¶œë ¥-íŒŒì¼-êµ¬ì¡°)
- [íœ´ì¥ì¼ ì²˜ë¦¬](#íœ´ì¥ì¼-ì²˜ë¦¬)
- [ì£¼ì˜ì‚¬í•­](#ì£¼ì˜ì‚¬í•­)
- [ë¬¸ì œ í•´ê²°](#ë¬¸ì œ-í•´ê²°)

---

## ì„¤ì¹˜ ìš”êµ¬ì‚¬í•­

### í•„ìˆ˜ ë¼ì´ë¸ŒëŸ¬ë¦¬
```bash
pip install requests pandas pykrx
```

### ì„¤ì • íŒŒì¼ (`config.json`)
`bnf_stock_screener3.py`ì™€ ë™ì¼í•œ ì„¤ì • íŒŒì¼ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

```json
{
  "app_key": "YOUR_APP_KEY",
  "app_secret": "YOUR_APP_SECRET",
  "account": "YOUR_ACCOUNT_NUMBER",
  "mock": false
}
```

---

## ê¸°ë³¸ ì‚¬ìš©ë²•

```bash
python get_data.py --config config.json --from YYYYMMDD [--to YYYYMMDD]
```

ë˜ëŠ”

```bash
python get_data.py --config config.json --add
```

---

## ëª…ë ¹ì¤„ ì˜µì…˜

| ì˜µì…˜ | í•„ìˆ˜ | ì„¤ëª… | ì˜ˆì‹œ |
|------|------|------|------|
| `--config` | âœ… | ì„¤ì • íŒŒì¼ ê²½ë¡œ | `--config config.json` |
| `--from` | âš ï¸ | ì‹œì‘ ë‚ ì§œ (YYYYMMDD) | `--from 20250101` |
| `--to` | âŒ | ì¢…ë£Œ ë‚ ì§œ (YYYYMMDD)<br>ìƒëµ ì‹œ `--from`ê³¼ ë™ì¼ | `--to 20250131` |
| `--add` | âš ï¸ | ëˆ„ë½ëœ ë°ì´í„° ìë™ ì¶”ê°€<br>(ë§ˆì§€ë§‰ ë‚ ì§œ ë‹¤ìŒë‚  ~ ì–´ì œ) | `--add` |

> âš ï¸ `--from` ë˜ëŠ” `--add` ì¤‘ í•˜ë‚˜ëŠ” ë°˜ë“œì‹œ í•„ìš”í•©ë‹ˆë‹¤.

---

## ì‚¬ìš© ì˜ˆì‹œ

### 1ï¸âƒ£ íŠ¹ì • ê¸°ê°„ì˜ ë°ì´í„° ìˆ˜ì§‘

**ì˜ˆì‹œ: 2025ë…„ 1ì›” ì „ì²´ ë°ì´í„° ìˆ˜ì§‘**
```bash
python get_data.py --config config.json --from 20250101 --to 20250131
```

**ì‹¤í–‰ ê²°ê³¼:**
```
============================================================
KOSPI 200 ì¢…ëª© ë°ì´í„° ìˆ˜ì§‘ í”„ë¡œê·¸ë¨
============================================================
ğŸ’° ì‹¤ì „íˆ¬ì ëª¨ë“œ
âœ“ ì„¤ì • íŒŒì¼ 'config.json' ë¡œë“œ ì™„ë£Œ

============================================================
KOSPI 200 ì¢…ëª© ì½”ë“œ ë¡œë”© ì¤‘...
============================================================
âœ“ ìºì‹œ íŒŒì¼ì—ì„œ KOSPI 200 ì¢…ëª© 200ê°œ ë¡œë“œ ì™„ë£Œ
âœ“ ì´ 200ê°œ ì¢…ëª© ë¡œë“œ ì™„ë£Œ

ğŸ“… ë°ì´í„° ìˆ˜ì§‘ ê¸°ê°„: 20250101 ~ 20250131
   ì´ 31ì¼ ì²˜ë¦¬ ì˜ˆì •

============================================================
ğŸ“… ë°ì´í„° ìˆ˜ì§‘ ë‚ ì§œ: 2025-01-01 (Wednesday)
============================================================
âš ï¸  20250101ëŠ” íœ´ì¥ì¼ì…ë‹ˆë‹¤.

============================================================
ğŸ“… ë°ì´í„° ìˆ˜ì§‘ ë‚ ì§œ: 2025-01-02 (Thursday)
============================================================
âœ“ ê±°ë˜ì¼ í™•ì¸ ì™„ë£Œ
ğŸ“Š ì´ 200ê°œ ì¢…ëª© ë°ì´í„° ìˆ˜ì§‘ ì‹œì‘...
------------------------------------------------------------
ì§„í–‰ì¤‘: 50/200 (25.0%)
ì§„í–‰ì¤‘: 100/200 (50.0%)
ì§„í–‰ì¤‘: 150/200 (75.0%)
ì§„í–‰ì¤‘: 200/200 (100.0%)

âœ“ ë°ì´í„° ìˆ˜ì§‘ ì™„ë£Œ: 198/200ê°œ ì¢…ëª©

...

============================================================
âœ“ JSON ì €ì¥ ì™„ë£Œ: data/json/kospi200/2025/kospi200_data.json
  2025ë…„: ì´ 31ì¼ (ê±°ë˜ì¼: 20ì¼, íœ´ì¥ì¼: 11ì¼)
============================================================

âœ… ì‘ì—… ì™„ë£Œ!
```

---

### 2ï¸âƒ£ íŠ¹ì •ì¼ í•˜ë£¨ë§Œ ìˆ˜ì§‘

**ì˜ˆì‹œ: 2025ë…„ 1ì›” 15ì¼ ë°ì´í„°ë§Œ ìˆ˜ì§‘**
```bash
python get_data.py --config config.json --from 20250115
```

> ğŸ’¡ `--to` ì˜µì…˜ì„ ìƒëµí•˜ë©´ `--from`ì— ì§€ì •í•œ ë‚ ì§œë§Œ ìˆ˜ì§‘í•©ë‹ˆë‹¤.

---

### 3ï¸âƒ£ ëˆ„ë½ëœ ë°ì´í„° ìë™ ì¶”ê°€ (â­ ì¶”ì²œ)

**ì˜ˆì‹œ: ê¸°ì¡´ ë°ì´í„°ì˜ ë§ˆì§€ë§‰ ë‚ ì§œë¶€í„° ì–´ì œê¹Œì§€ ìë™ìœ¼ë¡œ ì¶”ê°€**
```bash
python get_data.py --config config.json --add
```

**ë™ì‘ ë°©ì‹:**
1. `data/json/kospi200/` í´ë”ì—ì„œ ëª¨ë“  ì—°ë„ì˜ íŒŒì¼ì„ ê²€ìƒ‰
2. ê°€ì¥ ë§ˆì§€ë§‰ ë‚ ì§œë¥¼ ì°¾ìŒ (ì˜ˆ: 2025-01-10)
3. ë§ˆì§€ë§‰ ë‚ ì§œì˜ ë‹¤ìŒë‚ (2025-01-11)ë¶€í„° ì–´ì œê¹Œì§€ ë°ì´í„°ë¥¼ ìˆ˜ì§‘
4. ì—°ë„ë³„ë¡œ ê¸°ì¡´ ë°ì´í„°ì— ë³‘í•©í•˜ì—¬ ì €ì¥

**ì‹¤í–‰ ê²°ê³¼:**
```
============================================================
KOSPI 200 ì¢…ëª© ë°ì´í„° ìˆ˜ì§‘ í”„ë¡œê·¸ë¨
============================================================

ğŸ“Œ --add ì˜µì…˜: ëˆ„ë½ëœ ë°ì´í„° ì¶”ê°€ ëª¨ë“œ
âœ“ ê¸°ì¡´ ë°ì´í„° ë§ˆì§€ë§‰ ë‚ ì§œ: 20250110
ğŸ“… ì¶”ê°€ ìˆ˜ì§‘ ê¸°ê°„: 20250111 ~ 20250114

...

============================================================
âœ“ ë°ì´í„° ë³‘í•© ì™„ë£Œ: data/json/kospi200/2025/kospi200_data.json
  2025ë…„: ì´ 14ì¼ (ê±°ë˜ì¼: 12ì¼, íœ´ì¥ì¼: 2ì¼)
============================================================

âœ… ì‘ì—… ì™„ë£Œ!
```

> ğŸ’¡ ë§¤ì¼ ìë™ìœ¼ë¡œ ì‹¤í–‰í•˜ë„ë¡ ìŠ¤ì¼€ì¤„ëŸ¬ì— ë“±ë¡í•˜ë©´ í¸ë¦¬í•©ë‹ˆë‹¤!

---

### 4ï¸âƒ£ ì´ˆê¸° ë°ì´í„° êµ¬ì¶• (3ê°œì›”ì¹˜)

**ì˜ˆì‹œ: ìµœê·¼ 3ê°œì›” ë°ì´í„° ìˆ˜ì§‘**
```bash
python get_data.py --config config.json --from 20241115 --to 20250114
```

> âš ï¸ ê¸°ê°„ì´ ê¸¸ë©´ ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦½ë‹ˆë‹¤ (200ì¢…ëª© Ã— 90ì¼ = ì•½ 30ë¶„ ì†Œìš”)

---

## ì¶œë ¥ íŒŒì¼ êµ¬ì¡°

### ğŸ“ í´ë” êµ¬ì¡°
```
data/
â””â”€â”€ json/
    â””â”€â”€ kospi200/
        â”œâ”€â”€ 2024/
        â”‚   â””â”€â”€ kospi200_data.json    (2024ë…„ ë°ì´í„°)
        â”œâ”€â”€ 2025/
        â”‚   â””â”€â”€ kospi200_data.json    (2025ë…„ ë°ì´í„°)
        â””â”€â”€ 2026/
            â””â”€â”€ kospi200_data.json    (2026ë…„ ë°ì´í„°)
```

> ğŸ’¡ **ì—°ë„ë³„ íŒŒì¼ ë¶„ë¦¬**: íŒŒì¼ í¬ê¸°ë¥¼ ê´€ë¦¬í•˜ê¸° ì‰½ë„ë¡ ì—°ë„ë³„ë¡œ ìë™ ë¶„ë¦¬ë©ë‹ˆë‹¤.

### JSON êµ¬ì¡°

```json
{
  "year": "2025",
  "generated_at": "2025-01-15 14:30:00",
  "total_days": 31,
  "data": [
    {
      "date": "20250101",
      "is_holiday": true,
      "stocks": []
    },
    {
      "date": "20250102",
      "is_holiday": false,
      "stocks": [
        {
          "code": "005930",
          "name": "ì‚¼ì„±ì „ì",
          "open": 70000,
          "high": 71000,
          "low": 69500,
          "close": 70500,
          "volume": 10000000,
          "value": 705000000000
        },
        {
          "code": "000660",
          "name": "SKí•˜ì´ë‹‰ìŠ¤",
          "open": 150000,
          "high": 152000,
          "low": 149000,
          "close": 151000,
          "volume": 5000000,
          "value": 755000000000
        }
      ]
    }
  ]
}
```

### í•„ë“œ ì„¤ëª…

#### ìµœìƒìœ„ í•„ë“œ
| í•„ë“œ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| `year` | string | í•´ë‹¹ ì—°ë„ |
| `generated_at` | string | íŒŒì¼ ìƒì„± ì‹œê° |
| `total_days` | number | ì´ ì €ì¥ëœ ë‚ ì§œ ìˆ˜ |
| `data` | array | ë‚ ì§œë³„ ë°ì´í„° ë°°ì—´ |

#### ë‚ ì§œë³„ ë°ì´í„° (`data[]`)
| í•„ë“œ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| `date` | string | ë‚ ì§œ (YYYYMMDD) |
| `is_holiday` | boolean | íœ´ì¥ì¼ ì—¬ë¶€ |
| `stocks` | array | ì¢…ëª© ë°ì´í„° ë°°ì—´ |

#### ì¢…ëª© ë°ì´í„° (`stocks[]`)
| í•„ë“œ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| `code` | string | ì¢…ëª© ì½”ë“œ |
| `name` | string | ì¢…ëª©ëª… |
| `open` | number | ì‹œê°€ |
| `high` | number | ê³ ê°€ |
| `low` | number | ì €ê°€ |
| `close` | number | ì¢…ê°€ |
| `volume` | number | ê±°ë˜ëŸ‰ |
| `value` | number | ê±°ë˜ëŒ€ê¸ˆ (ì›) |

---

## íœ´ì¥ì¼ ì²˜ë¦¬

### ìë™ ê°ì§€
í”„ë¡œê·¸ë¨ì€ ë‹¤ìŒ ë‚ ì§œë¥¼ ìë™ìœ¼ë¡œ íœ´ì¥ì¼ë¡œ ê°ì§€í•©ë‹ˆë‹¤:
- ğŸ“… ì£¼ë§ (í† ìš”ì¼, ì¼ìš”ì¼)
- ğŸ‰ ê³µíœ´ì¼ (ì„¤ë‚ , ì¶”ì„, ëŒ€ì²´ê³µíœ´ì¼ ë“±)
- ğŸ“› ì„ì‹œ íœ´ì¥ì¼

### íœ´ì¥ì¼ ë°ì´í„° êµ¬ì¡°
```json
{
  "date": "20250101",
  "is_holiday": true,
  "stocks": []
}
```

### ë°ì´í„° í™œìš© ì‹œ ì£¼ì˜ì‚¬í•­
ë‹¤ë¥¸ í”„ë¡œê·¸ë¨ì—ì„œ ì´ ë°ì´í„°ë¥¼ ì‚¬ìš©í•  ë•Œ:

```python
import json

with open('data/json/result_all.json', 'r', encoding='utf-8') as f:
    data = json.load(f)

for day in data['data']:
    if day['is_holiday']:
        print(f"{day['date']}ëŠ” íœ´ì¥ì¼ì…ë‹ˆë‹¤.")
        continue
    
    # ê±°ë˜ì¼ ë°ì´í„° ì²˜ë¦¬
    for stock in day['stocks']:
        print(f"{stock['name']}: {stock['close']:,}ì›")
```

> ğŸ’¡ `is_holiday` í•„ë“œë¥¼ í™•ì¸í•˜ì—¬ ë°ì´í„°ê°€ ì—†ëŠ” ì´ìœ ê°€ ì˜¤ë¥˜ê°€ ì•„ë‹Œ íœ´ì¥ì¼ì„ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## ì£¼ì˜ì‚¬í•­

### âš ï¸ API í˜¸ì¶œ ì œí•œ
- pykrx ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ í•œêµ­íˆ¬ìì¦ê¶Œ API í˜¸ì¶œ ì œí•œì— ê±¸ë¦¬ì§€ ì•ŠìŠµë‹ˆë‹¤.
- í•˜ì§€ë§Œ ê³¼ë„í•œ ìš”ì²­ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ì ì ˆí•œ ì§€ì—° ì‹œê°„ì„ ë‘ê³  ìˆìŠµë‹ˆë‹¤.

### âš ï¸ ì‹¤í–‰ ì‹œê°„
- **1ì¼ ë°ì´í„°**: ì•½ 10~20ì´ˆ
- **1ê°œì›” ë°ì´í„°**: ì•½ 5~10ë¶„
- **3ê°œì›” ë°ì´í„°**: ì•½ 20~30ë¶„

### âš ï¸ ë°ì´í„° ì •í™•ì„±
- pykrxëŠ” ë„¤ì´ë²„ ê¸ˆìœµ ë“±ì—ì„œ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•©ë‹ˆë‹¤.
- ì‹¤ì‹œê°„ ë°ì´í„°ê°€ ì•„ë‹Œ ì „ì¼ ì¢…ê°€ ê¸°ì¤€ì…ë‹ˆë‹¤.
- ë‹¹ì¼ ë°ì´í„°ëŠ” ì¥ ë§ˆê° í›„(15:30 ì´í›„) ìˆ˜ì§‘í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.

### âš ï¸ íŒŒì¼ ë°±ì—…
- ë°ì´í„° ìˆ˜ì§‘ ì „ì— ê¸°ì¡´ íŒŒì¼ì„ ë°±ì—…í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.
```bash
# Windows (ì—°ë„ë³„ ë°±ì—… ì˜ˆì‹œ)
xcopy data\json\kospi200 data\json\kospi200_backup\ /E /I

# Linux/Mac
cp -r data/json/kospi200 data/json/kospi200_backup
```

---

## ë¬¸ì œ í•´ê²°

### âŒ "ê¸°ì¡´ ë°ì´í„° íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤" ì˜¤ë¥˜

**ë¬¸ì œ:**
```bash
python get_data.py --config config.json --add
```
```
âŒ ê¸°ì¡´ ë°ì´í„° íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.
   --from ì˜µì…˜ì„ ì‚¬ìš©í•˜ì—¬ ì²˜ìŒë¶€í„° ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ì„¸ìš”.
```

**í•´ê²° ë°©ë²•:**
ì²˜ìŒ ì‹¤í–‰í•  ë•ŒëŠ” `--add` ëŒ€ì‹  `--from` ì˜µì…˜ì„ ì‚¬ìš©í•˜ì„¸ìš”.
```bash
python get_data.py --config config.json --from 20250101 --to 20250114
```

---

### âŒ "ì¶”ê°€í•  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤" ë©”ì‹œì§€

**ë¬¸ì œ:**
```bash
python get_data.py --config config.json --add
```
```
âœ“ ì¶”ê°€í•  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤. (ë§ˆì§€ë§‰ ë‚ ì§œê°€ ìµœì‹ ì…ë‹ˆë‹¤)
```

**ì˜ë¯¸:**
ê¸°ì¡´ ë°ì´í„°ê°€ ì´ë¯¸ ì–´ì œê¹Œì§€ ìµœì‹  ìƒíƒœì…ë‹ˆë‹¤. ì •ìƒì…ë‹ˆë‹¤!

---

### âŒ KOSPI 200 ì¢…ëª© ì½”ë“œ ë¡œë“œ ì‹¤íŒ¨

**ë¬¸ì œ:**
```
âŒ KOSPI 200 ì¢…ëª© ì½”ë“œ ì¡°íšŒ ì‹¤íŒ¨: ...
```

**í•´ê²° ë°©ë²•:**
1. ì¸í„°ë„· ì—°ê²° í™•ì¸
2. pykrx ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¬ì„¤ì¹˜
```bash
pip install --upgrade pykrx
```
3. ìºì‹œ íŒŒì¼ ì‚­ì œ í›„ ì¬ì‹œë„
```bash
# Windows
del kospi_200_code.json

# Linux/Mac
rm kospi_200_code.json
```

---

### âŒ ì¼ë¶€ ì¢…ëª© ë°ì´í„° ëˆ„ë½

**ìƒí™©:**
```
âœ“ ë°ì´í„° ìˆ˜ì§‘ ì™„ë£Œ: 198/200ê°œ ì¢…ëª©
```

**ì˜ë¯¸:**
2ê°œ ì¢…ëª©ì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ë‹¤ìŒ ì´ìœ  ë•Œë¬¸ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤:
- ìƒì¥ íì§€
- ê±°ë˜ ì •ì§€
- ë°ì´í„° ì œê³µ ì˜¤ë¥˜

**í•´ê²° ë°©ë²•:**
ëŒ€ë¶€ë¶„ì˜ ë°ì´í„°ê°€ ìˆ˜ì§‘ë˜ì—ˆë‹¤ë©´ ì •ìƒì…ë‹ˆë‹¤. ë¬´ì‹œí•´ë„ ë©ë‹ˆë‹¤.

---

## ìë™í™” (ì„ íƒì‚¬í•­)

### Windows ì‘ì—… ìŠ¤ì¼€ì¤„ëŸ¬

1. **ë°°ì¹˜ íŒŒì¼ ìƒì„±** (`update_data.bat`)
```batch
@echo off
cd C:\my_project\bnf_stock
python get_data.py --config config.json --add
pause
```

2. **ì‘ì—… ìŠ¤ì¼€ì¤„ëŸ¬ ë“±ë¡**
   - ì‘ì—… ìŠ¤ì¼€ì¤„ëŸ¬ ì‹¤í–‰
   - "ê¸°ë³¸ ì‘ì—… ë§Œë“¤ê¸°" í´ë¦­
   - ë§¤ì¼ ì˜¤í›„ 4ì‹œ(ì¥ ë§ˆê° í›„) ì‹¤í–‰í•˜ë„ë¡ ì„¤ì •
   - ë™ì‘: `update_data.bat` ì‹¤í–‰

---

### Linux/Mac Cron

1. **ì‰˜ ìŠ¤í¬ë¦½íŠ¸ ìƒì„±** (`update_data.sh`)
```bash
#!/bin/bash
cd /path/to/bnf_stock
python3 get_data.py --config config.json --add
```

2. **ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬**
```bash
chmod +x update_data.sh
```

3. **Cron ë“±ë¡**
```bash
crontab -e
```

ë§¤ì¼ ì˜¤í›„ 4ì‹œì— ì‹¤í–‰:
```
0 16 * * * /path/to/update_data.sh
```

---

## ë°ì´í„° í™œìš© ì˜ˆì‹œ

### Pythonìœ¼ë¡œ ë°ì´í„° ì½ê¸° (ë‹¨ì¼ ì—°ë„)

```python
import json
from datetime import datetime

# íŠ¹ì • ì—°ë„ JSON íŒŒì¼ ì½ê¸°
year = "2025"
with open(f'data/json/kospi200/{year}/kospi200_data.json', 'r', encoding='utf-8') as f:
    data = json.load(f)

print(f"{data['year']}ë…„ ë°ì´í„°")
print(f"ì´ {data['total_days']}ì¼ ë°ì´í„°")
print(f"ìƒì„± ì‹œê°: {data['generated_at']}")
print()

# ê±°ë˜ì¼ë§Œ í•„í„°ë§
trading_days = [d for d in data['data'] if not d['is_holiday']]
print(f"ê±°ë˜ì¼: {len(trading_days)}ì¼")

# íŠ¹ì • ì¢…ëª© ë¶„ì„ (ì‚¼ì„±ì „ì)
for day in trading_days[-5:]:  # ìµœê·¼ 5ê±°ë˜ì¼
    samsung = next((s for s in day['stocks'] if s['code'] == '005930'), None)
    if samsung:
        date = datetime.strptime(day['date'], '%Y%m%d').strftime('%Y-%m-%d')
        print(f"{date}: {samsung['name']} ì¢…ê°€ {samsung['close']:,}ì›")
```

### ì—¬ëŸ¬ ì—°ë„ ë°ì´í„° í†µí•© ì½ê¸°

```python
import json
import os

def load_all_years_data():
    """ëª¨ë“  ì—°ë„ì˜ ë°ì´í„°ë¥¼ í†µí•©í•˜ì—¬ ë¡œë“œ"""
    base_dir = 'data/json/kospi200'
    all_data = []
    
    # ëª¨ë“  ì—°ë„ í´ë” ê²€ìƒ‰
    if os.path.exists(base_dir):
        for year in sorted(os.listdir(base_dir)):
            year_file = os.path.join(base_dir, year, 'kospi200_data.json')
            if os.path.exists(year_file):
                with open(year_file, 'r', encoding='utf-8') as f:
                    year_data = json.load(f)
                    all_data.extend(year_data['data'])
    
    return sorted(all_data, key=lambda x: x['date'])

# ì „ì²´ ë°ì´í„° ë¡œë“œ
all_days = load_all_years_data()
print(f"ì´ {len(all_days)}ì¼ ë°ì´í„° ë¡œë“œ")

# ìµœê·¼ 10ê±°ë˜ì¼ ì‚¼ì„±ì „ì ì¢…ê°€
trading_days = [d for d in all_days if not d['is_holiday']]
for day in trading_days[-10:]:
    samsung = next((s for s in day['stocks'] if s['code'] == '005930'), None)
    if samsung:
        print(f"{day['date']}: {samsung['close']:,}ì›")
```

### Pandasë¡œ ë°ì´í„° ë¶„ì„

```python
import json
import pandas as pd
import os

def load_stock_timeseries(stock_code, stock_name=""):
    """íŠ¹ì • ì¢…ëª©ì˜ ì‹œê³„ì—´ ë°ì´í„°ë¥¼ ëª¨ë“  ì—°ë„ì—ì„œ ì¶”ì¶œ"""
    base_dir = 'data/json/kospi200'
    stock_data = []
    
    # ëª¨ë“  ì—°ë„ ë°ì´í„° ê²€ìƒ‰
    if os.path.exists(base_dir):
        for year in sorted(os.listdir(base_dir)):
            year_file = os.path.join(base_dir, year, 'kospi200_data.json')
            if os.path.exists(year_file):
                with open(year_file, 'r', encoding='utf-8') as f:
                    data = json.load(f)
                    
                    for day in data['data']:
                        if not day['is_holiday']:
                            stock = next((s for s in day['stocks'] if s['code'] == stock_code), None)
                            if stock:
                                stock_data.append({
                                    'date': day['date'],
                                    'open': stock['open'],
                                    'high': stock['high'],
                                    'low': stock['low'],
                                    'close': stock['close'],
                                    'volume': stock['volume']
                                })
    
    return stock_data

# ì‚¼ì„±ì „ì ë°ì´í„° ì¶”ì¶œ
samsung_data = load_stock_timeseries('005930', 'ì‚¼ì„±ì „ì')

# DataFrame ìƒì„±
df = pd.DataFrame(samsung_data)
df['date'] = pd.to_datetime(df['date'])
df.set_index('date', inplace=True)

print(df.tail(10))
print(f"\ní‰ê·  ì¢…ê°€: {df['close'].mean():,.0f}ì›")
print(f"ìµœê³ ê°€: {df['high'].max():,}ì› ({df['high'].idxmax().strftime('%Y-%m-%d')})")
print(f"ìµœì €ê°€: {df['low'].min():,}ì› ({df['low'].idxmin().strftime('%Y-%m-%d')})")
print(f"í‰ê·  ê±°ë˜ëŸ‰: {df['volume'].mean():,.0f}ì£¼")
```

---

## ê´€ë ¨ íŒŒì¼

- `bnf_stock_screener3.py` - BNF ë§¤ë§¤ë²• ì¢…ëª© ì„ ì • í”„ë¡œê·¸ë¨
- `config.json` - API ì„¤ì • íŒŒì¼
- `kospi_200_code.json` - KOSPI 200 ì¢…ëª© ì½”ë“œ ìºì‹œ
- `data/json/kospi200/[ì—°ë„]/kospi200_data.json` - ìˆ˜ì§‘ëœ ë°ì´í„° (ì¶œë ¥, ì—°ë„ë³„)

---

## ë¬¸ì˜ ë° ì§€ì›

ë¬¸ì œê°€ ë°œìƒí•˜ê±°ë‚˜ ê¶ê¸ˆí•œ ì ì´ ìˆìœ¼ë©´:
1. ì—ëŸ¬ ë©”ì‹œì§€ ì „ì²´ë¥¼ ë³µì‚¬
2. ì‚¬ìš©í•œ ëª…ë ¹ì–´ ê¸°ë¡
3. ê°œë°œìì—ê²Œ ë¬¸ì˜

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸:** 2025-01-15  
**ë²„ì „:** 1.0

